---
import ShareItem from "@/components/bases/share-item.astro";
import ScriptShare from "@/components/bases/script.astro";

type Props = {
  text: string;
};

const { text } = Astro.props;
const { pathname } = Astro.url;

// Optimize URL construction - calculate once
const shareUrl = `${import.meta.env.SITE}${pathname}`;

// Define social share platforms configuration
const socialPlatforms = [
  {
    icon: "clipboard" as const,
    title: "Copy Link",
    platform: "clipboard",
    hoverColor: "hover:bg-primary hover:text-primary-content",
  },
  {
    icon: "facebook" as const,
    title: "Share on Facebook",
    platform: "facebook",
    hoverColor: "hover:bg-[#3b5998] hover:text-primary-content",
  },
  {
    icon: "twitter" as const,
    title: "Share on Twitter",
    platform: "twitter",
    hoverColor: "hover:bg-[#00acee] hover:text-primary-content",
  },
  {
    icon: "linkedin" as const,
    title: "Share on LinkedIn",
    platform: "linkedin",
    hoverColor: "hover:bg-[#0072b1] hover:text-primary-content",
  },
  {
    icon: "whatsapp" as const,
    title: "Share on WhatsApp",
    platform: "whatsapp",
    hoverColor: "hover:bg-[#25d366] hover:text-primary-content",
  },
] as const;
---

<div class="flex gap-2">
  {
    socialPlatforms.map((platform) => (
      <ShareItem
        className={platform.hoverColor}
        title={platform.title}
        dataAwSocialShare={platform.platform}
        dataAwUrl={shareUrl}
        dataAwText={text}
        icon={platform.icon}
      />
    ))
  }
</div>
<ScriptShare />
